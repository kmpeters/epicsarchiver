
<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module EpicsArchiver.util</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="EpicsArchiver.html"><font color="#ffffff">EpicsArchiver</font></a>.util</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/usr/lib/python2.4/site-packages/EpicsArchiver/util.py">/usr/lib/python2.4/site-packages/EpicsArchiver/util.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#fffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="time.html">time</a><br>
</td><td width="25%" valign=top></td><td width="25%" valign=top></td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-clean_input"><strong>clean_input</strong></a>(x, maxlen<font color="#909090">=None</font>)</dt><dd><tt>clean&nbsp;input,&nbsp;forcing&nbsp;it&nbsp;to&nbsp;be&nbsp;a&nbsp;string,&nbsp;with&nbsp;comments&nbsp;stripped,<br>
and&nbsp;guarding&nbsp;against&nbsp;extra&nbsp;sql&nbsp;statements</tt></dd></dl>
 <dl><dt><a name="-clean_mail_message"><strong>clean_mail_message</strong></a>(s)</dt><dd><tt>cleans&nbsp;a&nbsp;stored&nbsp;escaped&nbsp;mail&nbsp;message&nbsp;for&nbsp;real&nbsp;delivery</tt></dd></dl>
 <dl><dt><a name="-clean_string"><strong>clean_string</strong></a>(x, maxlen<font color="#909090">=None</font>)</dt></dl>
 <dl><dt><a name="-escape_string"><strong>escape_string</strong></a>(...)</dt><dd><tt><a href="#-escape_string">escape_string</a>(s)&nbsp;--&nbsp;quote&nbsp;any&nbsp;SQL-interpreted&nbsp;characters&nbsp;in&nbsp;string&nbsp;s.<br>
&nbsp;<br>
Use&nbsp;connection.<a href="#-escape_string">escape_string</a>(s),&nbsp;if&nbsp;you&nbsp;use&nbsp;it&nbsp;at&nbsp;all.<br>
_mysql.<a href="#-escape_string">escape_string</a>(s)&nbsp;cannot&nbsp;handle&nbsp;character&nbsp;sets.&nbsp;You&nbsp;are<br>
probably&nbsp;better&nbsp;off&nbsp;using&nbsp;connection.escape(o)&nbsp;instead,&nbsp;since<br>
it&nbsp;will&nbsp;escape&nbsp;entire&nbsp;sequences&nbsp;as&nbsp;well&nbsp;as&nbsp;strings.</tt></dd></dl>
 <dl><dt><a name="-get_force_update_time"><strong>get_force_update_time</strong></a>()</dt><dd><tt>inserts&nbsp;will&nbsp;be&nbsp;forced&nbsp;into&nbsp;the&nbsp;Archives&nbsp;for&nbsp;stale&nbsp;values<br>
between&nbsp;18&nbsp;and&nbsp;21&nbsp;hours&nbsp;after&nbsp;last&nbsp;insert.<br>
This&nbsp;will&nbsp;spread&nbsp;out&nbsp;inserts,&nbsp;and&nbsp;means&nbsp;that&nbsp;every&nbsp;PV&nbsp;is<br>
recorded&nbsp;at&nbsp;least&nbsp;once&nbsp;in&nbsp;any&nbsp;24&nbsp;hour&nbsp;period.</tt></dd></dl>
 <dl><dt><a name="-normalize_pvname"><strong>normalize_pvname</strong></a>(p)</dt><dd><tt>normalizes&nbsp;a&nbsp;PV&nbsp;name&nbsp;(so&nbsp;that&nbsp;it&nbsp;ends&nbsp;in&nbsp;.VAL&nbsp;if&nbsp;needed).</tt></dd></dl>
 <dl><dt><a name="-safe_string"><strong>safe_string</strong></a>(x)</dt></dl>
 <dl><dt><a name="-string_literal"><strong>string_literal</strong></a>(...)</dt><dd><tt><a href="#-string_literal">string_literal</a>(obj)&nbsp;--&nbsp;converts&nbsp;object&nbsp;obj&nbsp;into&nbsp;a&nbsp;SQL&nbsp;string&nbsp;literal.<br>
This&nbsp;means,&nbsp;any&nbsp;special&nbsp;SQL&nbsp;characters&nbsp;are&nbsp;escaped,&nbsp;and&nbsp;it&nbsp;is&nbsp;enclosed<br>
within&nbsp;single&nbsp;quotes.&nbsp;In&nbsp;other&nbsp;words,&nbsp;it&nbsp;performs:<br>
&nbsp;<br>
"'%s'"&nbsp;%&nbsp;<a href="#-escape_string">escape_string</a>(str(obj))<br>
&nbsp;<br>
Use&nbsp;connection.<a href="#-string_literal">string_literal</a>(obj),&nbsp;if&nbsp;you&nbsp;use&nbsp;it&nbsp;at&nbsp;all.<br>
_mysql.<a href="#-string_literal">string_literal</a>(obj)&nbsp;cannot&nbsp;handle&nbsp;character&nbsp;sets.</tt></dd></dl>
 <dl><dt><a name="-tformat"><strong>tformat</strong></a>(t<font color="#909090">=None</font>, format<font color="#909090">='%Y-%m-%d %H:%M:%S'</font>)</dt><dd><tt>time&nbsp;formatting</tt></dd></dl>
 <dl><dt><a name="-time_str2sec"><strong>time_str2sec</strong></a>(s)</dt></dl>
 <dl><dt><a name="-timehash"><strong>timehash</strong></a>()</dt><dd><tt>generate&nbsp;a&nbsp;simple,&nbsp;10&nbsp;character&nbsp;hash&nbsp;of&nbsp;the&nbsp;timestamp:<br>
Number&nbsp;of&nbsp;possibilites&nbsp;=&nbsp;16^11&nbsp;&gt;~&nbsp;10^13<br>
the&nbsp;hash&nbsp;is&nbsp;a&nbsp;linear-in-milliseconds&nbsp;timestamp,&nbsp;so&nbsp;collisions<br>
cannot&nbsp;happen&nbsp;for&nbsp;10^12&nbsp;milliseconds&nbsp;(33&nbsp;years).</tt></dd></dl>
 <dl><dt><a name="-valid_pvname"><strong>valid_pvname</strong></a>(pvname)</dt></dl>
 <dl><dt><a name="-write_saverestore"><strong>write_saverestore</strong></a>(pvvals, format<font color="#909090">='plain'</font>, header<font color="#909090">=None</font>)</dt><dd><tt>generate&nbsp;a&nbsp;save/restore&nbsp;file&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;PV&nbsp;values<br>
&nbsp;<br>
pvvals&nbsp;is&nbsp;a&nbsp;list&nbsp;or&nbsp;tuple&nbsp;of&nbsp;(pvname,value)&nbsp;pairs<br>
format&nbsp;can&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;plain&nbsp;&nbsp;&nbsp;plain&nbsp;save/restore&nbsp;file<br>
&nbsp;&nbsp;&nbsp;&nbsp;idl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idl&nbsp;script<br>
&nbsp;&nbsp;&nbsp;&nbsp;python&nbsp;&nbsp;python&nbsp;script&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
header:&nbsp;list&nbsp;of&nbsp;additional&nbsp;header/comment&nbsp;lines</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>MAX_EPOCH</strong> = 2147483647.0<br>
<strong>SEC_DAY</strong> = 86400.0<br>
<strong>motor_fields</strong> = ('.VAL', '.OFF', '.FOFF', '.SET', '.HLS', '.LLS', '.DIR', '_able.VAL', '.SPMG', '.DESC')<br>
<strong>valid_pvstr</strong> = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789:._'</td></tr></table>
</body></html>