{% extends "layout.html" %}
{% block body %}

<table><tr>
   <td valign=top>
      
  <form action="{{ url_for('formplot') }}" method=post>
    <table border=0 padding=2>
      
    <tr><td>PV 1:</td><td><input style="width: 200px;" type=text name=pv value='{{pv|safe}}'></td>
        <td>PV 2:</td><td><input style="width: 200px;" type=text name=pv2 value='{{pv2|safe}}'></td></tr>
    <tr><td>  <input type=submit name=submit value='From Present'></td>
      <td colspan=3>
         <select name='timevar' style="width: 100px;">
         {% for c in ago_choices %}
             <option value={{c.val}}  {% if c.val == default_ago %} selected=1 {% endif %}> {{c.label}}</option>
         {% endfor %}
      </select> </tr>
    <tr><td>  <input type=submit name=submit value='Selected Dates'>  </td>
      <td colspan=3> <input type='text' style="width: 175px;"
			    id="date1" name="date1" value="{{ odate1|safe }}">
                     <input type='text' style="width: 175px;"
	                    id="date2" name="date2" value="{{ odate2|safe }}">
                     <script type='text/javascript'>
         Calendar.setup({inputField: "date1",
                        ifFormat: "%Y-%m-%d %H:%M:%S",
                        showsTime: true,
                        timeFormat: 24,
                        showOthers: true,
                        singleClick: false,
                        weekNumbers: false });    
         Calendar.setup({inputField: "date2",
                        ifFormat: "%Y-%m-%d %H:%M:%S",
                        showsTime: true,
                        timeFormat: 24,
                        showOthers: true,
                        singleClick: false,
                        weekNumbers: false });    
     </script>
    </td></tr>
      {% if messages is not none %}
        <tr><td>Warnings:</td><td colspan=3>
	    <b>{{ messages }}</b><br> 
	</td></tr>
     {% endif %}


  <tr><td colspan=4> <img width=650 src="data:image/png;base64,{{ figure|safe }}"></td></tr>

  <tr><td>Replot</td><td colspan=3>
      {% for c in ago_choices %}
         {% if 'day' not in c.val %}
             <a href="/pvarch/plot/{{pv}}/{{pv2}}/time_ago/{{c.val}}"> {{c.label}}</a>&nbsp;&nbsp;
         {% endif %}
      {% endfor %}
  </td></tr>
  <tr><td>From Present:</td><td colspan=3>
      {% for c in ago_choices %}
        {% if 'day' in c.val %}
               <a href="/pvarch/plot/{{pv}}/{{pv2}}/time_ago/{{c.val}}"> {{c.label}}</a>&nbsp;&nbsp;
        {% endif %}
      {% endfor %}
  </td></tr>
  <tr><td>Data Files:</td><td colspan=3>
    <a href="/pvarch/data/{{pv}}/{{timestr}}/pv1.dat"> {{pv}}</a>
    {% if pv2 is not none %}
    &nbsp;&nbsp;
    <a href="/pvarch/data/{{pv2}}/{{timestr}}/pv2.dat"> {{pv2}}</a>
    {% endif %}
    </td></tr>
</table>

</form>
    
</td><td valign='top'>
  {% if pv2 is not none %}
  <a href="/pvarch/plot/{{pv2}}/{{pv}}/{{timestr}}"> Swap PV 1 and PV 2</a> <p>
    <a href="/pvarch/plot/{{pv}}/None/{{timestr}}">  PV 1 only</a> <p>    
  {% endif %}
  
  <b>Related PVs:</b><p>

  {% for other in related %}
       <a href="/pvarch/plot/{{pv}}/{{other}}/{{timestr}}"> {{other}}</a> <p>
  {% endfor %}
  
  </tr></table>
{% endblock %}
